## 计划任务

- [x] 开发媒资 v1.4.6 支付功能

  已跑通整个流程，在做细节调整。

- [x] 跟进营销线机构入驻进度

  目前没有抛出风险

- [x] 面试

## 临时任务

- [x] 修复学历业绩播报凌晨播报错误问题

  dayjs api 使用不熟练导致

## 工作总结

本周主要精力投入在接入 H5 支付的业务上，同上次接入公众号支付一样，落地页方案的确定就投入了好几天时间，这次比上次更久。一方面，目前基础服务文档没有规整统一存放，并且概念层面也未统一，导致前期浪费时间做了一些无用功。另一方面，产品在需求的了解上也不够详细和深入，我这边也应该让产品先确定支付方案，再去找技术沟通具体实现方案，双方产品沟通确定之后，技术的对接也会更加顺畅。

营销线的机构入驻的迭代在人员上暴露出问题，时间安排上跟不上后端的节奏。当然，时间紧也的确是客观原因。这次的迭代有点着急，涉及范围广，链路长，问题可能存在很多，重点在组织结构的设计上，各系统的权限均依赖于此。

周二暴露微信渠道落地页表单回传线上问题，原因是没有支付组件且发布渠道为微信公众号的落地页，提交表单后，上报到媒资的接口没有传递微信 openId。  
追溯版本历史记录，发现第一版微信公众号回传是做了微信授权的，发布渠道为微信公众号的情况下，进入落地页就会进行微信授权。但是接下来没几天就上线的支付组件版本，因为流程方面的因素，仅考虑到有支付组件的情况下，进入落地页才会进行微信授权。  
周三上线解决此问题又产生连锁反应，发现链路相关其它线上问题。没有支付组件，收集微信流量的落地页，投放渠道选择微信公众号，在微信打开会进行微信静默授权，然而业务人员没有在微信公众号上绑定媒资的网页授权域名，导致授权失败，弹出 10003 错误码。然而实际业务是收集微信流量的落地页，就算投放渠道选择的是微信公众号，其实也不需要执行微信静默授权，仅当收集手机流量时需要授权跟踪流量。  
以上描述都是前端方面暴露出的问题，在整体流程上涉及到很多细节没有被注意到，最近也一直在梳理、完善相关文档。
同时连锁反应同时还暴露出后端一些在配置、授权方面的问题。

学历业绩播报做的没什么章法可言，零零碎碎的需求调整来调整去，有点像做外包。
