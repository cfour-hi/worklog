# 述职报告

业务数据化、数据业务化

## 简介

2018 年 4 月 17 号入职潭州教育，加入潭州课堂大前端团队。  
2018 年 5 月份至今负责营销线前端的架构、开发、管理。
2019 年 8 月份调配为创新线前端负责人，仍兼任营销线前端负责人。

## 成就

1. CRM + 工单 可伸缩项目结构 和 项目开发工作效率优化

   背景：  
   CRM 和工单本是两个系统，因为整体规划将 CRM 和工单合并为一个系统，随着业务增长，系统复杂度逐渐提升。
   CRM 和工单项目存在大量重复模块，导致大量代码被重复编写（copy），任何一个小模块有问题，需要两边同时修改，沟通、修改、同步十分繁琐，而且毫无维护性可言，成本极高。

   预期：  
   拆分为各业务独立的系统，抽象潭州前端基础模块库。

   可伸缩项目结构：  
   单一系统承担的职责太多必然导致高度的复杂性，发展到一定阶段，必然会进行以业务为导向的系统拆分。  
   前端在 2018 年合并 CRM 和工单项目时就已经感受并体会到这个痛点，所以提前规划预期，经过两次大的项目结构设计，目前以 git-submodule 为基础，将营销线前端所有业务项目设计为 “微项目”，另外建立一个 “仓库” 型项目（取名 portal），集装在框架项目之下（取名 micro-frame）。  
   portal 项目包含业务项目所需的所有公共组件，是营销线业务项目的百宝箱，解耦各业务项目，也是各业务项目能独立拆分为独立系统的的关键因素之一。  
   micro-frame 项目作为集装箱，包含所有业务项目所需的依赖（避免各项目重复安装）、规范（统一各项目代码风格）、配置（同样避免各项目重复编写），是系统可灵活合并、拆分的核心因素。

   工作效率优化：  
   将所有公用模块内聚在独立项目 portal，一处开发，多处使用，避免重复开发，与业务项目分离，仅作为业务项目的依赖。  
   业务项目之间无耦合，只需处理独立的业务逻辑，所有公用模块从 portal 项目直接引入使用即可，无需关心内部逻辑。
   业务项目之间不再有重复开发，提升可复用性，保证可维护性，职责分明，分工明确。

2. 推动前端实践 GitFlow 工作流

   背景：  
   使用 Git 进行多人协作开发，没有统一的工作流机制，代码合并到环境分支或版本分支过程中，会产生各种代码冲突和被覆盖的情况。

   工作效率优化：  
   将 GitFlow 工作普及到每个小伙伴后，彻底消除环境分支或版本分支合并过程中的代码冲突和覆盖问题。  
   通过 rebase 合并代码方式，任何冲突和覆盖都在小伙伴提交代码之前，由各个小伙伴自己消化掉。  
   结合 PR 机制，负责人可以清楚的知道小伙伴提交的代码内容，依据实际情况选择是否合并。

3. 一套标准通用的 Vue 项目 ESLint 代码规范、Prettier 格式化代码配置。

   背景：  
   各项目无代码规范，代码风格迥异，代码格式不统一，导致项目可维护性差，代码评审困难，新人融入项目开发成本较高。

   预期：  
   通过 cli 生成项目时即包含所有配置，可直接进行业务开发。

   工作效率优化：  
   统一 Vue 项目 ESLint 代码规范，作为依赖包被各个 Vue 项目引入，独立更新迭代，各项目仅需再针对本项目特性新增个性化规则即可。  
   Prettier 格式化代码配置目前已统一，但配置文件仍需重复编写，未来打算是通过 cli 生成项目时同时生成。  
   ESLint + Prettier 二者配合，无论小伙伴在写代码时是什么风格，保存代码时都会自动格式化成统一的格式。

4. 推动前端异常监控平台 Sentry 搭建并探索使用

   背景：  
   线上问题无法第一时间发现，只能等到用户反馈问题之后进行修复，而收到用户反馈时其实已经对大批量用户造成影响。

   预期：  
   Sentry 与 Gitlab 平台打通，线上问题自动生成 issue，并通过邮件精确通知到个人。

   工作效率优化：
   线上异常可在用户反馈之前发现并解决，如果对用户造成业务流程或功能上的影响，也可在造成大批量用户影响之前及时修复并更新补丁上线，及时止损。

5. 推动单元测试在项目中展开（失败）

   背景：  
   项目多人协作开发，版本迭代中，小伙伴因为场景 A 修改了某个公用组件内部逻辑，而未顾及到场景 B，当前版改动未涉及到场景 B 的情况，测试也不会对场景 B 进行测试，上线后则会产生 bug。

   预期：  
   小伙伴都参与到基础组件的开发中来，并且为自己编写的基础组件提供单元测试，让每个小伙伴拥有这份意识和这项技能。

   由于业务项目本身特质，单元测试无法大面积覆盖，并且项目迭代中一段时间，因为项目结构的特殊性，单元测试融入项目比较困难，后期调整项目结构之后才真正融入单元测试。  
   目前项目中的单元测试仅针对基础组件局部覆盖，而项目中的基础组件并没有小伙伴参与，都是自己编写，所以单元测试并没有渗透到团队每个小伙伴参与其中。  
   现在保障上述场景问题不会出现的的方式，一是灌输小伙伴不可随意更改基础组件的意识，二是依赖于 Git 工作流的 PR 机制，三是代码评审机制。

## 团队

营销线成立之初，小伙伴的项目经历较少，团队协作意识不强，业务能力普遍不高，都不具备负责项目版本迭代的能力。  
团队经过一年的磨合，目前，营销线前端所有小伙伴都能作为版本迭代负责人承担相应职责，能够积极主动跟进进度。个人能力、团队合作、意识层面都有明显可见的提升，个别小伙伴在项目中贡献突出，当然，也有小伙伴虽有提升，但相对缓慢。  
整体而言，个人认为营销线的前端小伙伴在这一年多的工作中，是整个潭州大前端团队中进步最大的。
