## 计划任务

- [x] 产学研活动大会

- [x] 媒资 v1.4.1.1 上线

  下午上线过程中，用户在落地页编辑器出现程序异常的问题，原因是因为前后端版本发布完成时间不一致导致。以后要避免此问题，要做好以下两点：

  1. 提前一天发布上线消息，让用户有心理准备。
  2. 后端应该做好接口兼容处理，如果无法进行兼容，请提供新接口，发版时后端服务先发，再发前端资源。

- [x] 代码审查

  发现一个潜在 bug，已修复并上线。

## 本周总结

媒资 v1.4.1.1 已经上线，过程中暴露一个大问题，前后端上线发布完成时间不一致，存在几分钟的时差，导致用户在这几分钟使用系统，可能收到 “接口异常” 的提示消息。  
“接口异常” 的具体原因是因为版本迭代需求，前后端需要调整接口字段的数据结构，发布过程会出现以下两种情况。
第一，前端比后端先上线发布完成，前端请求使用的是新的数据结构，而后端由于未发布完成，仍然是老的接口服务接收请求，故而返回 “接口异常”。
第二，后端比前端先上线发布完成，前端请求使用的是老的数据结构，而后端已经发布完成，使用新的接口服务接收请求，故而同样返回 “接口异常”。
解决此问题的方案已经向大家简单说明，以后要求后端做好接口数据结构兼容处理，调整后的接口仍要支持老的数据结构请求，代码内必须写好注释说明，接口文档仍只提供最新的接口数据结构。如果无法进行兼容，则必须提供新接口，发版时后端服务先发，再发布前端资源，即可避免上述 “接口异常” 问题。

媒资 v1.4.1.1 上线后的代码评审中，仍挖掘出一个严重 bug，已经打好补丁及时修复，索性没有造成相关损失。其实在刚上测试环境时，就已经组织过一次代码评审，由于时间和其它原因，导致只评审了一半的代码量。这个严重 bug 源自于另外一半的代码。

上周跟运维 @刘敏 确认的 sentry 部署完成的时间节点是在本周结束，本周周二、周四、周五都有跟 @刘敏 跟进此事，目前仍未部署完成，具体原因不明，下周会每天持续跟进，直到部署完成。
