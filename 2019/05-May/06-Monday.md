## 计划任务

- [ ] CRM v1.17 任务：路由权限改造实现

  之前的路由权限判定逻辑经过这么久的迭代，代码已经挺乱了，这次做了整体优化，包括按钮权限判定。  
  菜单代码挺乱的，也还正在进行优化。

- [ ] 思考如何解决项目发布上线后用户端更新问题

  背景：昨天早上项目发布上线后，许多用户（业务人员）因为前一天下班没有关闭电脑、浏览器、CRM 站点，第二天到公司也没做浏览器刷新操作，直接继续使用 CRM 系统。由于此版本接口做了大量调整，接口名称没变的情况下，参数发生变化，服务端已发布最新服务，而用户端浏览器依然访问的是上个版本的系统，故导致接口报错。

- [x] 工单 v1.20 计划 review

## 临时任务

- [x] 解决线上问题

  下午快下班测试报出一些线上问题，查询项 科目级联组件 clear 后调用接口查询参数错误。  
  是因为后端接口只需要科目级联最后一级的 id 值，但是组件 v-model 绑定的数据类型是 Array，所以业务代码在 change 事件将接口所需数据进行赋值。但是 form-search mixin 将 clear 事件做了处理，clear 不会触发 change 事件，这才导致数据错误。  
  解决方案是对科目组件在进行一层包装，v-model 绑定值是最后一级 id，业务直接绑定接口所需值，无需再做任何处理。
