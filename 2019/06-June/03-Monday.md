## 计划任务

- [x] 工单 v1.22 需求评审

  1. 支持流量成交流程处理；
  2. 退款流程优化,电商店铺支付的退款单由电商部门审核；
  3. 解决流量部门可看到自已分成的业绩；
  4. 财务和部门负责人可以看到按部门分成流水为单位查看分成明细；

- [x] v1.21.1 补丁版本提测跟进

  屏蔽版本标识错误的接口异常状态提示

  上传接口因为使用了 element-ui upload 组件的内置上传功能，所以没有 withCredentials 配置，需要针对每个添加 withCredentials 属性。

  仅针对 crm 和 work 的 API 服务发送 cookie

- [x] 工作周报

  历经千辛万苦，工单 v1.21 终于上线。经过反思，之所以过程如此艰辛，主要还是老数据处理相关业务特别麻烦，而且很是别扭。现在新老数据的业务相关逻辑都糅合在一起，不好理解，未来的维护成本十分高。再往未来思考，没有老数据了，那这些逻辑要要着干啥？除了增加业务理解复杂度、维护难度，没有任何意义，版本迭代过程中涉及到退款业务的修改还得小心翼翼。吃一堑长一智，未来如果还有这样的业务，一定是将新老数据处理的业务逻辑分开，各模块使用不同的业务组件处理新老数据，业务组件包装 UI 组件。这样处理比现在的方式是要简单的，而且新老数据的处理分开，模块清晰、可维护性高。未来没有老数据的情况下，可以很容易扔掉老数据处理模块相关业务组件，而且不影响现有新数据的业务。

  系统更新后用户端更新的解决方案在上周已经确定下来并落地实施，整体而言并没有什么问题，但其实觉得并不优雅，因为对系统而言，是处于被动地位。就是说，需要用户端调用接口才能知道用户端版本是否为最新，为什么我们不做到系统一旦更新，就主动向在线用户（打开系统页面的用户）推送消息要求用户刷新或强制刷新呢？所以上周也做了一些 WebSocket 相关的解决方案，同时能解决现有系统中轮训调用查询当前用户是否被调动部门的业务。让系统处于主动地位，更加优雅的解决现有业务问题。

## 今日收获

### [How to control web page caching, across all browsers?](https://stackoverflow.com/questions/49547/how-to-control-web-page-caching-across-all-browsers)

今天让 @阿康 给服务器 index.html 静态资源配置响应头 Cache-Control: no-cache，解决缓存问题，因为浏览器会有默认缓存策略。

配置完成后 @阿康 告诉我说其实我们前端可以自己配置，第一反应就想到应该是 html head meta 标签。然后专门查了下相关资料，stackoverflow 的这个 提问/回答 是最好的解释了。

其实 html head meta Cache-Control 仅作为本地文件 file:// 打开才有效。

## 今日概览

@彭泽华 5 月份 S 评语

成果：

1. 工单退款业务的调整重构

优点：

1. 责任心

在工单 v1.21 退款这个棘手的业务中，过程十分艰辛，虽有抱怨，但从未松懈。  
为期大半个月的退款业务修正处理，专心投入其中，保持专注，在能力范围内以最优质的方式完成任务，并解决遗留问题。  
当其它小伙伴因事请假，需要提前联调，也义不容辞、不分昼夜的配合其它小伙伴完成联调任务，不论工作到多晚，也要保证他们的业务不影响其它人的联调测试。

2. 独立思考

版本迭代开发过程中，对于项目中一些现有遗留问题，有自己的独立思考，并能够提供一些新鲜思路从其它角度去解决。  
我们从来不缺能做事的开发者，缺的是能够 独立、主动 思考，有自己想法的开发者。

3. 团队协作能力的提升

人无完人，在团队协助方面一直是他的短板，但从最近工作过程中的表现能够看出，沟通、协助方面有了很大的提升。主动推进其他人完成任务，主动从其他人那里获取帮助，以积极的状态保证高效率完成任务，同时能够辐射到团队其他人。
